{
  "version": "1.0.0",
  "generated_at": "2026-02-24T12:19:38Z",
  "packs": [
    {
      "pack_id": "A_DRAWING",
      "label": "Drawing and Specification Completeness",
      "description": "Drawing communication, GPS/GD&T, callouts, and spec integrity checks.",
      "expected_rule_count": 25,
      "trigger_type": "always_base"
    },
    {
      "pack_id": "B_CNC",
      "label": "CNC Machining DFM",
      "description": "Milling and turning manufacturability checks from CAD and linked specs.",
      "expected_rule_count": 25,
      "trigger_type": "process_primary"
    },
    {
      "pack_id": "C_SHEET",
      "label": "Sheet Metal DFM",
      "description": "Bend, flange, relief, and flat-pattern manufacturability checks.",
      "expected_rule_count": 20,
      "trigger_type": "process_primary"
    },
    {
      "pack_id": "D_WELD",
      "label": "Weldment and Fabrication DFM",
      "description": "Weld specification completeness plus weldability and distortion risk checks.",
      "expected_rule_count": 15,
      "trigger_type": "process_primary"
    },
    {
      "pack_id": "E_ASSEMBLY",
      "label": "Assembly, Fixture, and Serviceability",
      "description": "DFA, fixture repeatability, and service access checks.",
      "expected_rule_count": 15,
      "trigger_type": "cross_process"
    },
    {
      "pack_id": "F_OVERLAY",
      "label": "Industry Overlay and Compliance",
      "description": "Domain overlays that add compliance/risk documentation constraints.",
      "expected_rule_count": 70,
      "trigger_type": "overlay_selected"
    }
  ],
  "rules": [
    {
      "rule_id": "SPEC-001",
      "pack_id": "A_DRAWING",
      "title": "General tolerances declared (ISO 2768-1/-2 or equivalent)",
      "description": "General tolerances declared (ISO 2768-1/-2 or equivalent)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_title_block",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-3",
        "REF-GPS-4"
      ]
    },
    {
      "rule_id": "SPEC-002",
      "pack_id": "A_DRAWING",
      "title": "GPS fundamentals declared (defaults/interpretation consistent with ISO 8015 framework)",
      "description": "GPS fundamentals declared (defaults/interpretation consistent with ISO 8015 framework)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-003",
      "pack_id": "A_DRAWING",
      "title": "Units shown (mm/in) and consistent across drawing",
      "description": "Units shown (mm/in) and consistent across drawing",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-004",
      "pack_id": "A_DRAWING",
      "title": "Projection method shown (1st/3rd angle) if multi-view drawing",
      "description": "Projection method shown (1st/3rd angle) if multi-view drawing",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-005",
      "pack_id": "A_DRAWING",
      "title": "Material specified (grade + condition/heat treat if relevant)",
      "description": "Material specified (grade + condition/heat treat if relevant)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_title_block",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-006",
      "pack_id": "A_DRAWING",
      "title": "Surface texture requirement present where function-critical",
      "description": "Surface texture requirement present where function-critical",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes",
        "surface_finish_spec"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "critical",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-5"
      ]
    },
    {
      "rule_id": "SPEC-007",
      "pack_id": "A_DRAWING",
      "title": "Surface texture symbol includes parameter value (e",
      "description": "Surface texture symbol includes parameter value (e.g., Ra) when used",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-5"
      ]
    },
    {
      "rule_id": "SPEC-008",
      "pack_id": "A_DRAWING",
      "title": "\u201cDeburr/break edges\u201d requirement present if sharp edges unacceptable",
      "description": "\u201cDeburr/break edges\u201d requirement present if sharp edges unacceptable",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-009",
      "pack_id": "A_DRAWING",
      "title": "Critical features have explicit tolerances (don\u2019t rely only on general tolerances)",
      "description": "Critical features have explicit tolerances (don\u2019t rely only on general tolerances)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "critical",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-3"
      ]
    },
    {
      "rule_id": "SPEC-010",
      "pack_id": "A_DRAWING",
      "title": "GD&T frames use valid symbols and datums",
      "description": "GD&T frames use valid symbols and datums",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-1"
      ]
    },
    {
      "rule_id": "SPEC-011",
      "pack_id": "A_DRAWING",
      "title": "Datum references exist on actual features (not \u201cfloating\u201d letters)",
      "description": "Datum references exist on actual features (not \u201cfloating\u201d letters)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-2"
      ]
    },
    {
      "rule_id": "SPEC-012",
      "pack_id": "A_DRAWING",
      "title": "Thread callouts include tolerance class (e",
      "description": "Thread callouts include tolerance class (e.g., 6H/6g system)",
      "applies_to": [
        "drawing",
        "drawing_thread_callout"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-THR-1"
      ]
    },
    {
      "rule_id": "SPEC-013",
      "pack_id": "A_DRAWING",
      "title": "Thread callouts include pitch (if not coarse default) and length/depth",
      "description": "Thread callouts include pitch (if not coarse default) and length/depth",
      "applies_to": [
        "drawing",
        "drawing_thread_callout"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-THR-1"
      ]
    },
    {
      "rule_id": "SPEC-014",
      "pack_id": "A_DRAWING",
      "title": "Fasteners in BOM include property class (e",
      "description": "Fasteners in BOM include property class (e.g., 8.8/10.9)",
      "applies_to": [
        "drawing",
        "bom"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-BLT-1"
      ]
    },
    {
      "rule_id": "SPEC-015",
      "pack_id": "A_DRAWING",
      "title": "Torque/clamp requirements specified when joint performance is critical",
      "description": "Torque/clamp requirements specified when joint performance is critical",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes",
        "bom_items",
        "assembly_model"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "critical",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-TOR-1"
      ]
    },
    {
      "rule_id": "SPEC-016",
      "pack_id": "A_DRAWING",
      "title": "Welds use ISO 2553 symbols (not ambiguous sketches)",
      "description": "Welds use ISO 2553 symbols (not ambiguous sketches)",
      "applies_to": [
        "drawing",
        "drawing_weld_callout"
      ],
      "inputs_required": [
        "weld_symbols",
        "weld_data"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-WLD-1"
      ]
    },
    {
      "rule_id": "SPEC-017",
      "pack_id": "A_DRAWING",
      "title": "Weld symbol includes size (a/z) and length/intermittent pattern if applicable",
      "description": "Weld symbol includes size (a/z) and length/intermittent pattern if applicable",
      "applies_to": [
        "drawing",
        "drawing_weld_callout"
      ],
      "inputs_required": [
        "weld_symbols",
        "weld_data"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-WLD-1"
      ]
    },
    {
      "rule_id": "SPEC-018",
      "pack_id": "A_DRAWING",
      "title": "Weld quality level specified when required (B/C/D)",
      "description": "Weld quality level specified when required (B/C/D)",
      "applies_to": [
        "drawing",
        "drawing_weld_callout"
      ],
      "inputs_required": [
        "drawing_notes",
        "weld_notes",
        "weld_data"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-WLD-2"
      ]
    },
    {
      "rule_id": "SPEC-019",
      "pack_id": "A_DRAWING",
      "title": "Weld inspection/testing notes present when specified (NDT, pressure test etc",
      "description": "Weld inspection/testing notes present when specified (NDT, pressure test etc.)",
      "applies_to": [
        "drawing",
        "drawing_weld_callout"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-WLD-1",
        "REF-PED-EU"
      ]
    },
    {
      "rule_id": "SPEC-020",
      "pack_id": "A_DRAWING",
      "title": "Coating/finish type and thickness specified when functional (corrosion, hygiene)",
      "description": "Coating/finish type and thickness specified when functional (corrosion, hygiene)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-HYG-1",
        "REF-PED-EU"
      ]
    },
    {
      "rule_id": "SPEC-021",
      "pack_id": "A_DRAWING",
      "title": "Revision + change note present for released drawings",
      "description": "Revision + change note present for released drawings",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-MED-QMS",
        "REF-AUTO-QMS"
      ]
    },
    {
      "rule_id": "SPEC-022",
      "pack_id": "A_DRAWING",
      "title": "CTQs flagged (special characteristics) if auto/medical process requires it",
      "description": "CTQs flagged (special characteristics) if auto/medical process requires it",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GM-CSR",
        "REF-AUTO-QMS"
      ]
    },
    {
      "rule_id": "SPEC-023",
      "pack_id": "A_DRAWING",
      "title": "Inspection method expectation indicated for hard-to-measure GD&T",
      "description": "Inspection method expectation indicated for hard-to-measure GD&T",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-2"
      ]
    },
    {
      "rule_id": "SPEC-024",
      "pack_id": "A_DRAWING",
      "title": "Surface finish + tolerance not contradictory (e",
      "description": "Surface finish + tolerance not contradictory (e.g., extreme Ra + wide tol without note)",
      "applies_to": [
        "drawing"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-GPS-5"
      ]
    },
    {
      "rule_id": "SPEC-025",
      "pack_id": "A_DRAWING",
      "title": "Assembly drawing includes BOM + callouts for joining method",
      "description": "Assembly drawing includes BOM + callouts for joining method",
      "applies_to": [
        "drawing",
        "bom",
        "assembly"
      ],
      "inputs_required": [
        "assembly_model"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add or correct drawing specification for explicit, measurable intent.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "CNC-001",
      "pack_id": "B_CNC",
      "title": "Min wall thickness check vs material class (thin walls \u2192 vibration/warp risk)",
      "description": "Min wall thickness check vs material class (thin walls \u2192 vibration/warp risk)",
      "applies_to": [
        "cad_part",
        "cad_feature_wall"
      ],
      "inputs_required": [
        "wall_thickness_map",
        "material_spec"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1",
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-002",
      "pack_id": "B_CNC",
      "title": "Deep holes: recommended depth ~4\u00d7D, hard max ~10\u00d7D (flag beyond)",
      "description": "Deep holes: recommended depth ~4\u00d7D, hard max ~10\u00d7D (flag beyond)",
      "applies_to": [
        "cad_part",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "hole_depth",
        "hole_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-003",
      "pack_id": "B_CNC",
      "title": "Prefer standard drill diameters (non-standard \u2192 milling/time)",
      "description": "Prefer standard drill diameters (non-standard \u2192 milling/time)",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "hole_diameter",
        "hole_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-004",
      "pack_id": "B_CNC",
      "title": "Blind drilled holes: conical floor expected (flag if flat-bottom functional)",
      "description": "Blind drilled holes: conical floor expected (flag if flat-bottom functional)",
      "applies_to": [
        "cad_part",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "hole_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-005",
      "pack_id": "B_CNC",
      "title": "Pocket internal corners: small radius \u2192 small tool \u2192 depth limits/cost",
      "description": "Pocket internal corners: small radius \u2192 small tool \u2192 depth limits/cost",
      "applies_to": [
        "cad_part",
        "cad_feature_pocket"
      ],
      "inputs_required": [
        "pocket_depth",
        "pocket_corner_radius"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-006",
      "pack_id": "B_CNC",
      "title": "Prefer largest internal radii possible (cost + finish benefit",
      "description": "Prefer largest internal radii possible (cost + finish benefit; depth vs radius trade)",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "pocket_depth",
        "radii_set"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-3"
      ]
    },
    {
      "rule_id": "CNC-007",
      "pack_id": "B_CNC",
      "title": "Avoid \u201craised islands/bosses\u201d if they require removing whole face volume (cost driver)",
      "description": "Avoid \u201craised islands/bosses\u201d if they require removing whole face volume (cost driver)",
      "applies_to": [
        "cad_part",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-008",
      "pack_id": "B_CNC",
      "title": "Suggest inserts (studs/dowels) vs raised machined features when feasible",
      "description": "Suggest inserts (studs/dowels) vs raised machined features when feasible",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-009",
      "pack_id": "B_CNC",
      "title": "Text/engraving: small cutters increase time",
      "description": "Text/engraving: small cutters increase time; use radiused fonts",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "engraving_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-010",
      "pack_id": "B_CNC",
      "title": "Corner radius consistency across pockets (tool reuse reduces time)",
      "description": "Corner radius consistency across pockets (tool reuse reduces time)",
      "applies_to": [
        "cad_part",
        "cad_feature_pocket"
      ],
      "inputs_required": [
        "radii_set"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-3",
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-011",
      "pack_id": "B_CNC",
      "title": "Tool access: internal corner smaller than tool radius \u2192 redesign (relief/teardrop)",
      "description": "Tool access: internal corner smaller than tool radius \u2192 redesign (relief/teardrop)",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-012",
      "pack_id": "B_CNC",
      "title": "Thin ribs/bosses: flag for deflection (recommend thicker or support)",
      "description": "Thin ribs/bosses: flag for deflection (recommend thicker or support).   Turning-specific",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2",
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-013",
      "pack_id": "B_CNC",
      "title": "Placeholder: Feature accessibility check for long-reach tools in deep cavities",
      "description": "Placeholder: Feature accessibility check for long-reach tools in deep cavities",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "pocket_depth"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2",
        "REF-CNC-3"
      ]
    },
    {
      "rule_id": "CNC-014",
      "pack_id": "B_CNC",
      "title": "Placeholder: Multi-setup requirement warning when critical features are not reachable in one setup",
      "description": "Placeholder: Multi-setup requirement warning when critical features are not reachable in one setup",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "critical",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2",
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "CNC-020",
      "pack_id": "B_CNC",
      "title": "Tight tolerance on thin wall features \u2192 likely scrap risk",
      "description": "Tight tolerance on thin wall features \u2192 likely scrap risk; suggest redesign or add stock",
      "applies_to": [
        "cad_part",
        "cad_feature_wall"
      ],
      "inputs_required": [
        "wall_thickness_map"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-021",
      "pack_id": "B_CNC",
      "title": "Tight positional tolerances without datum strategy \u2192 inspection/machining risk",
      "description": "Tight positional tolerances without datum strategy \u2192 inspection/machining risk",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-GPS-2"
      ]
    },
    {
      "rule_id": "CNC-022",
      "pack_id": "B_CNC",
      "title": "Surface finish Ra very low on large area \u2192 time/cost",
      "description": "Surface finish Ra very low on large area \u2192 time/cost; suggest selective finishing",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-GPS-5",
        "REF-CNC-2"
      ]
    },
    {
      "rule_id": "CNC-023",
      "pack_id": "B_CNC",
      "title": "Threaded holes too close to edge \u2192 breakout risk",
      "description": "Threaded holes too close to edge \u2192 breakout risk; suggest move/add boss",
      "applies_to": [
        "cad_part",
        "cad_feature_hole",
        "cad_feature_thread"
      ],
      "inputs_required": [
        "thread_callouts"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-1"
      ]
    },
    {
      "rule_id": "CNC-024",
      "pack_id": "B_CNC",
      "title": "Deep pocket with small corner radius \u2192 cost driver",
      "description": "Deep pocket with small corner radius \u2192 cost driver; suggest larger radius or split part",
      "applies_to": [
        "cad_part",
        "cad_feature_pocket"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-2",
        "REF-CNC-3"
      ]
    },
    {
      "rule_id": "CNC-025",
      "pack_id": "B_CNC",
      "title": "Part size exceeds typical machine envelope (flag for special setup/fixture)",
      "description": "Part size exceeds typical machine envelope (flag for special setup/fixture)",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "part_bounding_box"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "TURN-001",
      "pack_id": "B_CNC",
      "title": "Turned walls thinner than guideline risk failure",
      "description": "Turned walls thinner than guideline risk failure",
      "applies_to": [
        "cad_part",
        "cad_feature_wall"
      ],
      "inputs_required": [
        "wall_thickness_map",
        "material_spec",
        "sheet_thickness"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "TURN-002",
      "pack_id": "B_CNC",
      "title": "Sharp inside corners become radiused naturally",
      "description": "Sharp inside corners become radiused naturally; flag if sharp is function-critical",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "critical",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "TURN-003",
      "pack_id": "B_CNC",
      "title": "Turned outside corners usually chamfered",
      "description": "Turned outside corners usually chamfered; flag if sharp is required",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "TURN-004",
      "pack_id": "B_CNC",
      "title": "Min hole sizes for turning (axial/radial) \u2014 flag below",
      "description": "Min hole sizes for turning (axial/radial) \u2014 flag below",
      "applies_to": [
        "cad_part",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "hole_diameter",
        "hole_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "TURN-005",
      "pack_id": "B_CNC",
      "title": "Long slender turned sections: flag chatter risk",
      "description": "Long slender turned sections: flag chatter risk; recommend support/geometry change.   GD&T \u2194 machining feasibility bridge",
      "applies_to": [
        "cad_part"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Adjust geometry/process for machine capability and setup risk.",
      "refs": [
        "REF-CNC-4"
      ]
    },
    {
      "rule_id": "SM-001",
      "pack_id": "C_SHEET",
      "title": "Min flange length \u2265 4\u00d7 thickness",
      "description": "Min flange length \u2265 4\u00d7 thickness",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "flange_length"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-002",
      "pack_id": "C_SHEET",
      "title": "Prefer consistent bend radii across bends (tooling reuse)",
      "description": "Prefer consistent bend radii across bends (tooling reuse)",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend"
      ],
      "inputs_required": [
        "radii_set",
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-003",
      "pack_id": "C_SHEET",
      "title": "Hole/slot diameter \u2265 material thickness",
      "description": "Hole/slot diameter \u2265 material thickness",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "hole_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-004",
      "pack_id": "C_SHEET",
      "title": "Hole-to-edge distance: enforce guideline thresholds (distortion risk)",
      "description": "Hole-to-edge distance: enforce guideline thresholds (distortion risk)",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-005",
      "pack_id": "C_SHEET",
      "title": "Hole-to-bend proximity: flag distortion-prone features",
      "description": "Hole-to-bend proximity: flag distortion-prone features",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend",
        "cad_feature_hole"
      ],
      "inputs_required": [
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-006",
      "pack_id": "C_SHEET",
      "title": "Tabs: width \u2265 2\u00d7t (or \u2265 3",
      "description": "Tabs: width \u2265 2\u00d7t (or \u2265 3.2 mm) and length \u2264 5\u00d7 width",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-007",
      "pack_id": "C_SHEET",
      "title": "Notches: width \u2265 t (or \u2265 1",
      "description": "Notches: width \u2265 t (or \u2265 1.016 mm), length \u2264 5\u00d7 width",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-008",
      "pack_id": "C_SHEET",
      "title": "Countersink angles limited to standard angles",
      "description": "Countersink angles limited to standard angles; flag odd angles",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-009",
      "pack_id": "C_SHEET",
      "title": "Formed countersink tolerances looser",
      "description": "Formed countersink tolerances looser; flag if tight tol demanded on formed CSK",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-010",
      "pack_id": "C_SHEET",
      "title": "Bend angle tolerance expectation \u00b11\u00b0",
      "description": "Bend angle tolerance expectation \u00b11\u00b0; flag if drawing demands tighter without process note",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend"
      ],
      "inputs_required": [
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-011",
      "pack_id": "C_SHEET",
      "title": "Multi-bend stack-up: flag tight across-bend tolerances",
      "description": "Multi-bend stack-up: flag tight across-bend tolerances",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend"
      ],
      "inputs_required": [
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-012",
      "pack_id": "C_SHEET",
      "title": "Hem design: check minimum inside diameter and return length vs thickness",
      "description": "Hem design: check minimum inside diameter and return length vs thickness",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-013",
      "pack_id": "C_SHEET",
      "title": "Offset features: flag very small offsets likely to be inconsistent",
      "description": "Offset features: flag very small offsets likely to be inconsistent",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-014",
      "pack_id": "C_SHEET",
      "title": "Hardware inserts spacing: enforce manufacturer spec placeholder requirement",
      "description": "Hardware inserts spacing: enforce manufacturer spec placeholder requirement",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-015",
      "pack_id": "C_SHEET",
      "title": "Edge burr control note present (deburr, edge break)",
      "description": "Edge burr control note present (deburr, edge break)",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-016",
      "pack_id": "C_SHEET",
      "title": "Consistent thickness per part",
      "description": "Consistent thickness per part; flag mixed thickness in one flat pattern",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "sheet_thickness"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-017",
      "pack_id": "C_SHEET",
      "title": "Laser cut internal corners: suggest radii to reduce crack initiation",
      "description": "Laser cut internal corners: suggest radii to reduce crack initiation",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-018",
      "pack_id": "C_SHEET",
      "title": "Small formed part sizes below guideline risk handling issues",
      "description": "Small formed part sizes below guideline risk handling issues",
      "applies_to": [
        "cad_sheet_metal"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-019",
      "pack_id": "C_SHEET",
      "title": "Very long bends near max envelope: flag handling/deflection risk",
      "description": "Very long bends near max envelope: flag handling/deflection risk",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend"
      ],
      "inputs_required": [
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "SM-020",
      "pack_id": "C_SHEET",
      "title": "Prefer symmetric bend layout to reduce twist/warp",
      "description": "Prefer symmetric bend layout to reduce twist/warp",
      "applies_to": [
        "cad_sheet_metal",
        "cad_feature_bend"
      ],
      "inputs_required": [
        "bend_features"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise sheet-metal geometry or bend strategy to match fabrication limits.",
      "refs": [
        "REF-SM-1"
      ]
    },
    {
      "rule_id": "WLD-001",
      "pack_id": "D_WELD",
      "title": "Welds specified using ISO 2553 symbols",
      "description": "Welds specified using ISO 2553 symbols",
      "applies_to": [
        "weldment",
        "drawing_weld_callout"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-1"
      ]
    },
    {
      "rule_id": "WLD-002",
      "pack_id": "D_WELD",
      "title": "Weld size and length/intermittency specified",
      "description": "Weld size and length/intermittency specified",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-1"
      ]
    },
    {
      "rule_id": "WLD-003",
      "pack_id": "D_WELD",
      "title": "Weld quality level B/C/D specified where relevant",
      "description": "Weld quality level B/C/D specified where relevant.   Distortion & cost control rules (process reality)",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-2"
      ]
    },
    {
      "rule_id": "WLD-004",
      "pack_id": "D_WELD",
      "title": "Placeholder: Weld process type and filler compatibility shall be declared for critical joints",
      "description": "Placeholder: Weld process type and filler compatibility shall be declared for critical joints",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "drawing_notes",
        "weld_notes",
        "weld_data",
        "material_spec"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-1",
        "REF-WLD-2"
      ]
    },
    {
      "rule_id": "WLD-010",
      "pack_id": "D_WELD",
      "title": "Minimize weld metal volume (flag oversized fillet legs vs requirement)",
      "description": "Minimize weld metal volume (flag oversized fillet legs vs requirement)",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-011",
      "pack_id": "D_WELD",
      "title": "Avoid overwelding (cost + distortion)",
      "description": "Avoid overwelding (cost + distortion)",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-012",
      "pack_id": "D_WELD",
      "title": "Prefer intermittent welds where continuous not required",
      "description": "Prefer intermittent welds where continuous not required",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "joint_type"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-013",
      "pack_id": "D_WELD",
      "title": "Place welds near neutral axis / balanced about joint to reduce distortion",
      "description": "Place welds near neutral axis / balanced about joint to reduce distortion",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-014",
      "pack_id": "D_WELD",
      "title": "Prefer double-V over single-V when appropriate to balance shrinkage",
      "description": "Prefer double-V over single-V when appropriate to balance shrinkage",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-015",
      "pack_id": "D_WELD",
      "title": "Eliminate welding by forming/rolled sections where possible",
      "description": "Eliminate welding by forming/rolled sections where possible.   Manufacturability checks",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-020",
      "pack_id": "D_WELD",
      "title": "Access for welding torch/robot (flag obstructed joints)",
      "description": "Access for welding torch/robot (flag obstructed joints)",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "assembly_model"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-021",
      "pack_id": "D_WELD",
      "title": "Post-weld machining allowance noted if precision faces present",
      "description": "Post-weld machining allowance noted if precision faces present",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-022",
      "pack_id": "D_WELD",
      "title": "Distortion-sensitive thin plates: flag and suggest sequencing/fixtures",
      "description": "Distortion-sensitive thin plates: flag and suggest sequencing/fixtures",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "weld_data",
        "sheet_thickness"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-023",
      "pack_id": "D_WELD",
      "title": "Weld + corrosion protection compatibility check (paint/coat access)",
      "description": "Weld + corrosion protection compatibility check (paint/coat access)",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "coating_spec",
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-3"
      ]
    },
    {
      "rule_id": "WLD-024",
      "pack_id": "D_WELD",
      "title": "Weld inspection/testing callouts present if required by project class",
      "description": "Weld inspection/testing callouts present if required by project class",
      "applies_to": [
        "weldment"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Clarify weld callouts and update weld design to reduce distortion and quality risk.",
      "refs": [
        "REF-WLD-1",
        "REF-PED-EU"
      ]
    },
    {
      "rule_id": "ASM-001",
      "pack_id": "E_ASSEMBLY",
      "title": "Reduce part count by combining parts where no \u201cminimum part criteria\u201d applies",
      "description": "Reduce part count by combining parts where no \u201cminimum part criteria\u201d applies",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-002",
      "pack_id": "E_ASSEMBLY",
      "title": "Reduce fasteners",
      "description": "Reduce fasteners; prefer self-retaining features where possible",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-003",
      "pack_id": "E_ASSEMBLY",
      "title": "Standardize components",
      "description": "Standardize components; reduce unique variants",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-004",
      "pack_id": "E_ASSEMBLY",
      "title": "Minimize reorientation/flips in assembly sequence",
      "description": "Minimize reorientation/flips in assembly sequence",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "assembly_model"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-005",
      "pack_id": "E_ASSEMBLY",
      "title": "Add poka-yoke features to prevent wrong orientation",
      "description": "Add poka-yoke features to prevent wrong orientation",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-006",
      "pack_id": "E_ASSEMBLY",
      "title": "Easy handling: avoid tiny/flexible/slippery parts without handling features",
      "description": "Easy handling: avoid tiny/flexible/slippery parts without handling features",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "material_spec"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-007",
      "pack_id": "E_ASSEMBLY",
      "title": "Clear symmetry/asymmetry for orientation (avoid ambiguous \u201clooks same\u201d)",
      "description": "Clear symmetry/asymmetry for orientation (avoid ambiguous \u201clooks same\u201d)",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "ASM-008",
      "pack_id": "E_ASSEMBLY",
      "title": "Minimize secondary operations & inspection steps (flag deburr-only parts, hand rework)",
      "description": "Minimize secondary operations & inspection steps (flag deburr-only parts, hand rework).   Fixture/workholding feasibility (critical for machining and inspection)",
      "applies_to": [
        "assembly"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Refine assembly approach to lower error risk and improve access.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "FIX-001",
      "pack_id": "E_ASSEMBLY",
      "title": "Ensure a stable 3-2-1 locating scheme is possible on real surfaces",
      "description": "Ensure a stable 3-2-1 locating scheme is possible on real surfaces",
      "applies_to": [
        "assembly",
        "fixture_plan"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine fixture strategy for repeatability and inspection access.",
      "refs": [
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "FIX-002",
      "pack_id": "E_ASSEMBLY",
      "title": "Provide flat, accessible datum pads for locating",
      "description": "Provide flat, accessible datum pads for locating; avoid raw/irregular datum surfaces",
      "applies_to": [
        "assembly",
        "fixture_plan"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine fixture strategy for repeatability and inspection access.",
      "refs": [
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "FIX-003",
      "pack_id": "E_ASSEMBLY",
      "title": "Clamp forces won\u2019t deform thin walls (flag clamp-sensitive areas)",
      "description": "Clamp forces won\u2019t deform thin walls (flag clamp-sensitive areas)",
      "applies_to": [
        "assembly",
        "fixture_plan"
      ],
      "inputs_required": [
        "wall_thickness_map"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine fixture strategy for repeatability and inspection access.",
      "refs": [
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "FIX-004",
      "pack_id": "E_ASSEMBLY",
      "title": "Tool access near locators",
      "description": "Tool access near locators; avoid long overhang setups",
      "applies_to": [
        "assembly",
        "fixture_plan"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Refine fixture strategy for repeatability and inspection access.",
      "refs": [
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "FIX-005",
      "pack_id": "E_ASSEMBLY",
      "title": "Add sacrificial tabs or fixture bosses when no good clamping exists",
      "description": "Add sacrificial tabs or fixture bosses when no good clamping exists.   Serviceability",
      "applies_to": [
        "assembly",
        "fixture_plan"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "minor",
      "fix_template": "Refine fixture strategy for repeatability and inspection access.",
      "refs": [
        "REF-FIX-1"
      ]
    },
    {
      "rule_id": "SRV-001",
      "pack_id": "E_ASSEMBLY",
      "title": "Ensure tool access to fasteners (wrench clearance) in final assembly",
      "description": "Ensure tool access to fasteners (wrench clearance) in final assembly",
      "applies_to": [
        "assembly",
        "serviceability"
      ],
      "inputs_required": [
        "assembly_model"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Improve service access and maintainability constraints.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "SRV-002",
      "pack_id": "E_ASSEMBLY",
      "title": "Minimize unique tool types (hex sizes, torx types)",
      "description": "Minimize unique tool types (hex sizes, torx types)",
      "applies_to": [
        "assembly",
        "serviceability"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "minor",
      "fix_template": "Improve service access and maintainability constraints.",
      "refs": [
        "REF-DFA-1"
      ]
    },
    {
      "rule_id": "AUTO-001",
      "pack_id": "F_OVERLAY",
      "title": "Automotive QMS requirements (IATF 16949 aligned with ISO 9001) drive design control discipline",
      "description": "Automotive QMS requirements (IATF 16949 aligned with ISO 9001) drive design control discipline",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-AUTO-QMS"
      ]
    },
    {
      "rule_id": "AUTO-002",
      "pack_id": "F_OVERLAY",
      "title": "VDA 6",
      "description": "VDA 6.3 process audit readiness: ensure evidence for process capability & controls",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-VDA-6-3"
      ]
    },
    {
      "rule_id": "AUTO-003",
      "pack_id": "F_OVERLAY",
      "title": "Control plan linkage expected in CSR examples",
      "description": "Control plan linkage expected in CSR examples",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "control_plan"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-GM-CSR"
      ]
    },
    {
      "rule_id": "AUTO-004",
      "pack_id": "F_OVERLAY",
      "title": "Layout inspection expectation (example: dimensional requirements on \u22655 parts)",
      "description": "Layout inspection expectation (example: dimensional requirements on \u22655 parts)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "inspection_plan"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-GM-CSR"
      ]
    },
    {
      "rule_id": "AUTO-005",
      "pack_id": "F_OVERLAY",
      "title": "Special characteristics tagging supported (CTQ/CC/SC)",
      "description": "Special characteristics tagging supported (CTQ/CC/SC).   F5 Medical devices (mechanical content)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-GM-CSR",
        "REF-VDA-6-3"
      ]
    },
    {
      "rule_id": "FOOD-001",
      "pack_id": "F_OVERLAY",
      "title": "Hygienic design: machine must be cleanable",
      "description": "Hygienic design: machine must be cleanable; hygiene hazards identified and reduced",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "surface_finish_spec"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-FOOD-EN"
      ]
    },
    {
      "rule_id": "FOOD-002",
      "pack_id": "F_OVERLAY",
      "title": "Avoid crevices/gaps/steps",
      "description": "Avoid crevices/gaps/steps; avoid exposed threads in product areas",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-HYG-1"
      ]
    },
    {
      "rule_id": "FOOD-003",
      "pack_id": "F_OVERLAY",
      "title": "Prefer self-draining geometry",
      "description": "Prefer self-draining geometry; avoid horizontal ledges",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-HYG-1"
      ]
    },
    {
      "rule_id": "FOOD-004",
      "pack_id": "F_OVERLAY",
      "title": "Food-contact surfaces target smoothness (Ra guidance), and generous internal radii",
      "description": "Food-contact surfaces target smoothness (Ra guidance), and generous internal radii",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "radii_set"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-HYG-1"
      ]
    },
    {
      "rule_id": "FOOD-005",
      "pack_id": "F_OVERLAY",
      "title": "Hygiene requirements + intended use info provided by manufacturer",
      "description": "Hygiene requirements + intended use info provided by manufacturer.   F3 Pressure equipment / HVAC / refrigeration",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-FOOD-ISO"
      ]
    },
    {
      "rule_id": "HVAC-001",
      "pack_id": "F_OVERLAY",
      "title": "EN 378 expects design/construction/testing/marking/documentation coverage for systems",
      "description": "EN 378 expects design/construction/testing/marking/documentation coverage for systems",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "bom_items"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-HVAC-EN"
      ]
    },
    {
      "rule_id": "HVAC-002",
      "pack_id": "F_OVERLAY",
      "title": "Refrigerant/system changes require reassessment of conformity to EN 378 parts",
      "description": "Refrigerant/system changes require reassessment of conformity to EN 378 parts.   F4 Automotive Tier suppliers",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "refrigerant_type"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-HVAC-EN"
      ]
    },
    {
      "rule_id": "LAB-001",
      "pack_id": "F_OVERLAY",
      "title": "Safety requirements for lab/measurement equipment apply (product category match)",
      "description": "Safety requirements for lab/measurement equipment apply (product category match)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-LAB-IEC"
      ]
    },
    {
      "rule_id": "LAB-002",
      "pack_id": "F_OVERLAY",
      "title": "Mechanical hazards + protection measures considered (covers more than drawings)",
      "description": "Mechanical hazards + protection measures considered (covers more than drawings)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "hazard_analysis"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-LAB-IEC"
      ]
    },
    {
      "rule_id": "LAB-003",
      "pack_id": "F_OVERLAY",
      "title": "Labeling/documentation expectations captured in template",
      "description": "Labeling/documentation expectations captured in template",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-LAB-IEC"
      ]
    },
    {
      "rule_id": "LAB-004",
      "pack_id": "F_OVERLAY",
      "title": "Reasonably foreseeable misuse considered (design & documentation)",
      "description": "Reasonably foreseeable misuse considered (design & documentation)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-LAB-IEC"
      ]
    },
    {
      "rule_id": "LAB-005",
      "pack_id": "F_OVERLAY",
      "title": "Electrical safety constraints impact enclosure/clearances (tie to enclosure CAD checks)",
      "description": "Electrical safety constraints impact enclosure/clearances (tie to enclosure CAD checks).   How to \u201cuse this\u201d with a vision model (without pretending screenshots give real 3D DFM) You can reliably do two kinds of checks with vision: 1. Drawing/spec compliance (",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features",
        "enclosure_geometry"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-LAB-IEC"
      ]
    },
    {
      "rule_id": "MACH-001",
      "pack_id": "F_OVERLAY",
      "title": "Risk assessment required",
      "description": "Risk assessment required; hazards identified across lifecycle",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MACH-ISO"
      ]
    },
    {
      "rule_id": "MACH-002",
      "pack_id": "F_OVERLAY",
      "title": "Risk reduction measures documented (design + safeguarding)",
      "description": "Risk reduction measures documented (design + safeguarding)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MACH-ISO"
      ]
    },
    {
      "rule_id": "MACH-003",
      "pack_id": "F_OVERLAY",
      "title": "Machine design must meet EU machinery health/safety requirements",
      "description": "Machine design must meet EU machinery health/safety requirements",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MACH-REG"
      ]
    },
    {
      "rule_id": "MACH-004",
      "pack_id": "F_OVERLAY",
      "title": "Maintenance access considered (guards, pinch points, access panels)",
      "description": "Maintenance access considered (guards, pinch points, access panels)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "assembly_model",
        "geometry_features"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MACH-ISO"
      ]
    },
    {
      "rule_id": "MACH-005",
      "pack_id": "F_OVERLAY",
      "title": "Safety-related control functions require structured design approach",
      "description": "Safety-related control functions require structured design approach.   F2 Food machinery / Hygienic design (very \u201cDFM-ish\u201d)",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MACH-ISO",
        "REF-MACH-REG"
      ]
    },
    {
      "rule_id": "MED-001",
      "pack_id": "F_OVERLAY",
      "title": "Must meet EU MDR requirements for placing devices on market + safety/performance",
      "description": "Must meet EU MDR requirements for placing devices on market + safety/performance",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MDR-EU"
      ]
    },
    {
      "rule_id": "MED-002",
      "pack_id": "F_OVERLAY",
      "title": "QMS (ISO 13485) design/production controls: traceability + validated processes expectation",
      "description": "QMS (ISO 13485) design/production controls: traceability + validated processes expectation",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MED-QMS"
      ]
    },
    {
      "rule_id": "MED-003",
      "pack_id": "F_OVERLAY",
      "title": "Risk management process (ISO 14971): hazards \u2192 risk controls \u2192 residual risk monitoring",
      "description": "Risk management process (ISO 14971): hazards \u2192 risk controls \u2192 residual risk monitoring",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "risk_file"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MED-RISK"
      ]
    },
    {
      "rule_id": "MED-004",
      "pack_id": "F_OVERLAY",
      "title": "Design changes: controlled, reviewed, documented",
      "description": "Design changes: controlled, reviewed, documented",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MED-QMS"
      ]
    },
    {
      "rule_id": "MED-005",
      "pack_id": "F_OVERLAY",
      "title": "Cleanability/bioburden-related design constraints treated as DFM risks when relevant",
      "description": "Cleanability/bioburden-related design constraints treated as DFM risks when relevant.   F6 Test & measurement / lab equipment",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "surface_finish_spec",
        "material_spec"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-MED-RISK",
        "REF-HYG-1"
      ]
    },
    {
      "rule_id": "PRES-001",
      "pack_id": "F_OVERLAY",
      "title": "Pressure equipment must meet essential safety requirements",
      "description": "Pressure equipment must meet essential safety requirements; hazards analysed",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-PED-EU"
      ]
    },
    {
      "rule_id": "PRES-002",
      "pack_id": "F_OVERLAY",
      "title": "Pressure boundary joints: welding/testing documentation required where applicable",
      "description": "Pressure boundary joints: welding/testing documentation required where applicable",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "weld_data",
        "joint_type"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-PED-EU",
        "REF-WLD-1"
      ]
    },
    {
      "rule_id": "PRES-003",
      "pack_id": "F_OVERLAY",
      "title": "Correct classification/category influences conformity assessment",
      "description": "Correct classification/category influences conformity assessment; flag missing PS/TS data",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "nameplate_parameters"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add required compliance evidence and overlay-specific controls.",
      "refs": [
        "REF-PED-EU"
      ]
    },
    {
      "rule_id": "ALPMA-001",
      "pack_id": "F_OVERLAY",
      "title": "Portion cutting machine scope reviewed against EN 13870 requirements",
      "description": "Pilot portion-cutting concepts should explicitly map safety and hygiene obligations from EN 13870.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add machine-specific compliance evidence for portion-cutting use case and constraints.",
      "refs": [
        "REF-FOOD-EN13870"
      ]
    },
    {
      "rule_id": "ALPMA-002",
      "pack_id": "F_OVERLAY",
      "title": "Food-contact materials declaration includes EU 1935/2004 and EU 10/2011 linkage",
      "description": "Food-contact and polymer components should carry explicit declaration path for EU framework and plastics regulation.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "material_spec",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Declare food-contact compliance path and polymer migration evidence for relevant parts.",
      "refs": [
        "REF-FCM-EU-1935-2004",
        "REF-FCM-EU-10-2011"
      ]
    },
    {
      "rule_id": "ALPMA-003",
      "pack_id": "F_OVERLAY",
      "title": "Stainless stock callout ties grade to EN 10088-3 where applicable",
      "description": "For 1.4404/316L design intent, material callout should map to EN 10088-3 style stock specification.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "material_spec",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Add material grade and stock standard reference for stainless components.",
      "refs": [
        "REF-MAT-EN10088-3"
      ]
    },
    {
      "rule_id": "ALPMA-004",
      "pack_id": "F_OVERLAY",
      "title": "General tolerance baseline for CNC pilot parts is explicitly declared (ISO 2768-fH)",
      "description": "Pilot machining drawings should avoid ambiguity by explicitly declaring fH baseline where intended.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Declare ISO 2768 class explicitly for pilot machining release package.",
      "refs": [
        "REF-TOL-2768-FH"
      ]
    },
    {
      "rule_id": "ALPMA-005",
      "pack_id": "F_OVERLAY",
      "title": "Locating fits for dowel/kinematic interfaces are declared (ISO 286 H7/m6 intent)",
      "description": "Precision locating interfaces should include fit-system declaration to avoid assembly drift in pilot builds.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "datum_scheme",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Add fit callouts for mating locator features and inspection strategy.",
      "refs": [
        "REF-FIT-286"
      ]
    },
    {
      "rule_id": "ALPMA-006",
      "pack_id": "F_OVERLAY",
      "title": "Anodic oxidation specification declared when aluminum corrosion/hygiene finish is required",
      "description": "Where anodized aluminum is intended, coating notes should align to ISO 7599-style requirements.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "coating_spec",
        "drawing_notes",
        "material_spec"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Add coating class/thickness/process notes and tolerance compensation guidance.",
      "refs": [
        "REF-COAT-7599"
      ]
    },
    {
      "rule_id": "ALPMA-007",
      "pack_id": "F_OVERLAY",
      "title": "Pipe-thread designation is explicit for fluid/service interfaces (ISO 228-1 where used)",
      "description": "Interfaces using G-thread families should declare ISO 228-1 compatible callouts and sealing intent.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "thread_callouts",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Declare thread system and mating/sealing assumptions for service interfaces.",
      "refs": [
        "REF-THR-228-1"
      ]
    },
    {
      "rule_id": "ALPMA-008",
      "pack_id": "F_OVERLAY",
      "title": "General tolerance baseline is explicit for concept drawings (ISO 2768-mK)",
      "description": "Early concept packages should still declare baseline tolerance class to prevent supplier interpretation gaps.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Declare ISO 2768 class explicitly in title block/notes for concept release.",
      "refs": [
        "REF-TOL-2768-MK"
      ]
    },
    {
      "rule_id": "ROBOT-001",
      "pack_id": "F_OVERLAY",
      "title": "Robot-side mounting interface compatibility is declared to ISO 9409-1 intent",
      "description": "Robot-integrated tooling concepts should specify flange/interface compatibility evidence before pilot release.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Document robot interface pattern assumptions and mounting compatibility checks.",
      "refs": [
        "REF-ROBOT-9409-1"
      ]
    },
    {
      "rule_id": "PILOT-001",
      "pack_id": "F_OVERLAY",
      "title": "Pilot release includes machinery CE framework context where customers still require 2006/42/EC mapping",
      "description": "Legacy CE documentation expectations should be identified early for pilot machinery deliveries.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Provide CE/legacy directive applicability note in pilot documentation set.",
      "refs": [
        "REF-MACH-DIR-2006-42"
      ]
    },
    {
      "rule_id": "PILOT-002",
      "pack_id": "F_OVERLAY",
      "title": "Machine hygiene design cross-check against EN ISO 14159 and EN 1672-2 intent",
      "description": "Hygiene-focused pilot designs should align machine-level hygiene strategy and cleanability evidence.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "surface_finish_spec",
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Add cleanability and hygiene-by-design evidence with measurable acceptance criteria.",
      "refs": [
        "REF-FOOD-ISO",
        "REF-FOOD-EN"
      ]
    },
    {
      "rule_id": "PILOT-003",
      "pack_id": "F_OVERLAY",
      "title": "Additive prototype route declares process framework (VDI 3405) when used",
      "description": "PA12/additive pilot artifacts should include process assumptions and quality controls when presented for production decisions.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context",
        "material_spec"
      ],
      "check_logic": {
        "type": "llm_assisted"
      },
      "severity": "major",
      "fix_template": "Declare additive process route, material condition, and transfer-to-production constraints.",
      "refs": [
        "REF-ADD-VDI-3405"
      ]
    },
    {
      "rule_id": "PSTD-001",
      "pack_id": "F_OVERLAY",
      "title": "ISO 9409-1 robot interface geometry must match selected flange pattern",
      "description": "Verifies that an ISO 9409-1 robot mechanical interface is implemented with the correct hole pattern and locating features for interchangeability.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Select a valid ISO 9409-1 interface size/type and regenerate the flange geometry to match; update the mating plate accordingly.",
      "refs": [
        "REF-ROBOT-9409-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-001",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.robot_interface.conformance_flag",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Compute bolt pattern + locating features and compare against the selected ISO 9409-1 interface variant library (size/type).",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.robot_interface.standard",
          "cad.robot_interface.variant",
          "cad.robot_interface.conformance_flag"
        ],
        "compiled_inputs": [
          "geometry_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-002",
      "pack_id": "F_OVERLAY",
      "title": "Robot/end-effector drawings must reference ISO 9409-1 when that interface is used",
      "description": "Ensures the drawing references ISO 9409-1 to avoid supplier ambiguity for robot flange interfaces.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add a note/callout referencing ISO 9409-1 and include the intended interface designation (size/type).",
      "refs": [
        "REF-ROBOT-9409-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-002",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.text_all",
          "op": "contains",
          "right": "ISO 9409-1"
        },
        "source_evaluator_hint": "Extract title block and interface callouts; flag if ISO 9409-1 is missing.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.text_all"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-003",
      "pack_id": "F_OVERLAY",
      "title": "Fit-critical mating holes/shafts must have an ISO 286 fit designation",
      "description": "Checks that fit-critical mating features are annotated with ISO 286 tolerance classes (e.g., H7/h6) rather than relying only on general tolerances.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add ISO 286 fit callouts for each fit-critical pair (hole and shaft) and confirm nominal size range matches the ISO tables.",
      "refs": [
        "REF-FIT-286"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-003",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.features_of_size.mating_without_fit_callout_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Requires upstream tagging of fit-critical mating pairs; if unavailable, treat as evidence_gap and request tagging.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.features_of_size.mating_without_fit_callout_count"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-004",
      "pack_id": "F_OVERLAY",
      "title": "Computed ISO 286 fit outcome must match the intended fit type",
      "description": "Validates that the selected ISO 286 tolerance classes produce the intended clearance/transition/interference range for each tagged mating pair.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "hole_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Adjust tolerance classes or nominal sizes (e.g., change from m6 to k6) until min/max clearance meets the intended functional fit; update drawing callouts.",
      "refs": [
        "REF-FIT-286"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-004",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.fits.all_pairs_intended_fit_type_met",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "For each tagged mating pair, compute min/max clearance from ISO 286-derived limit deviations and compare against intended fit type configured by the designer.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.fits.all_pairs_intended_fit_type_met"
        ],
        "compiled_inputs": [
          "hole_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-005",
      "pack_id": "F_OVERLAY",
      "title": "General tolerance note must be present when ISO 2768-mK is used",
      "description": "Ensures the drawing explicitly states the default general tolerance class ISO 2768-mK so suppliers do not apply unspecified shop defaults.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add to title block: 'General tolerances ISO 2768-mK' (and, if referencing ISO 2768-2, add ':1989' or adopt ISO 22081 explicitly).",
      "refs": [
        "REF-TOL-2768-MK"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-005",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.title_block.general_tolerance_note",
          "op": "contains",
          "right": "ISO 2768-mK"
        },
        "source_evaluator_hint": "Also recommend explicitly dating any ISO 2768-2 reference component because ISO 2768-2 is withdrawn; treat undated references as needing manual review.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.title_block.general_tolerance_note"
        ],
        "compiled_inputs": [
          "drawing_title_block"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-006",
      "pack_id": "F_OVERLAY",
      "title": "Anodizing callouts must reference ISO 7599 when anodic oxidation is specified",
      "description": "If anodizing is specified as a controlled surface treatment, the drawing should reference ISO 7599 and state the required coating attributes (e.g., grade/thickness/performance).",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "coating_spec"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Update the surface treatment callout to include ISO 7599 and key coating properties required for the application; align with supplier capability.",
      "refs": [
        "REF-COAT-7599"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-006",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.surface_treatments.anodizing.references",
          "op": "contains",
          "right": "ISO 7599"
        },
        "source_evaluator_hint": "Parse surface treatment notes; if anodizing is present but ISO 7599 is absent, raise evidence gap.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.surface_treatments.anodizing.present",
          "drawing.surface_treatments.anodizing.references"
        ],
        "compiled_inputs": [
          "coating_spec"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-007",
      "pack_id": "F_OVERLAY",
      "title": "Pipe thread callouts must explicitly state ISO 228-1 for G-threads",
      "description": "Ensures pipe threads intended as ISO 228-1 are called out as ISO 228-1 to avoid confusion with pressure-tight thread standards.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "thread_callouts"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Revise pipe thread notes to include 'ISO 228-1' and the proper designation (e.g., 'G 1/2'). Specify sealing method elsewhere if joint must be pressure tight.",
      "refs": [
        "REF-THR-228-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-007",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.thread_callouts.pipe_threads_text",
          "op": "contains",
          "right": "ISO 228-1"
        },
        "source_evaluator_hint": "Also verify that the thread designation uses 'G' for ISO 228-1 parallel pipe threads.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.thread_callouts.pipe_threads_text"
        ],
        "compiled_inputs": [
          "thread_callouts"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-008",
      "pack_id": "F_OVERLAY",
      "title": "ISO 228-1 pipe threads must be parallel and match designated size",
      "description": "Checks that modeled ISO 228-1 pipe threads are parallel (not tapered) and match the designated nominal size for manufacturability and assembly interchangeability.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "hole_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Replace tapered threads with ISO 228-1 parallel geometry (or change the callout standard) and confirm the mating component uses the same designation.",
      "refs": [
        "REF-THR-228-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-008",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.threads.iso228_all_conformant",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Detect and classify pipe threads; for ISO 228-1, verify parallel geometry and nominal designation against the selected size.",
        "source_pilot_sets": [
          "SET_A_MECH_ROBOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.threads.iso228_all_conformant"
        ],
        "compiled_inputs": [
          "hole_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-009",
      "pack_id": "F_OVERLAY",
      "title": "Food-contact designs must not include enclosed/trapped volumes in product/splash zones",
      "description": "Flags enclosed cavities or trapped volumes in product-contact or splash zones that are difficult to clean, supporting EN 1672-2 hygienic/cleanability intent.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Eliminate enclosed cavities in hygienic zones (open, vent, drain, or redesign); if a cavity is necessary, document cleaning/inspection access and validation.",
      "refs": [
        "REF-FOOD-EN"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-009",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.hygienic_design.enclosed_voids_in_product_zone_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Use computational geometry to detect enclosed voids and non-drainable pockets in tagged hygienic zones; require zone tagging if absent.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.hygienic_design.enclosed_voids_in_product_zone_count"
        ],
        "compiled_inputs": [
          "geometry_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-010",
      "pack_id": "F_OVERLAY",
      "title": "Food machinery drawings must state hygiene/cleanability assumptions needed for correct use",
      "description": "Ensures the drawing pack or associated documentation states hygienic zoning and intended cleaning method so manufacturing and verification are aligned.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add hygiene zoning (product-contact/splash/non-contact) and intended cleaning method reference to the drawing notes or linked spec; align with EN 1672-2 compliance rationale.",
      "refs": [
        "REF-FOOD-EN"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-010",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.hygiene.zone_tagging_present",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Accept either explicit zone marking on drawings or a linked hygiene zoning document referenced in drawing notes/BOM.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.hygiene.zone_tagging_present"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-011",
      "pack_id": "F_OVERLAY",
      "title": "If the product is a portion cutting machine, documentation must reference EN 13870",
      "description": "EN 13870 is a type-C standard for portion cutting machines; if applicable, ensure the documentation references EN 13870 and uses the current edition.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "info",
      "fix_template": "If applicable, add 'EN 13870:2015+A1:2021' (or local adoption) to the standards list in the drawing pack and align risk assessment accordingly.",
      "refs": [
        "REF-FOOD-EN13870"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-011",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.text_all",
          "op": "contains",
          "right": "EN 13870"
        },
        "source_evaluator_hint": "Apply only when project.product_category indicates a portion cutting machine (or equivalent). If not applicable, suppress.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "project.product_category",
          "drawing.text_all"
        ],
        "compiled_inputs": [
          "manual_context",
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-012",
      "pack_id": "F_OVERLAY",
      "title": "Hygienic designs should avoid non-drainable pockets and inaccessible crevices in hygienic zones",
      "description": "Checks for trapped volumes and inaccessible crevices in hygienic zones as a proxy for EHEDG hygienic design guidance.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Redesign pockets/crevices to be drainable and cleanable (e.g., add drainage, open access, or redesign geometry). Document any unavoidable non-drainable features and their validated cleaning method.",
      "refs": [
        "REF-HYG-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-012",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.hygienic_design.trapped_volume_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Compute trapped volume / dead-pocket metrics in tagged hygienic zones (product-contact and splash). If hygienic zones are not tagged, raise evidence_gap first.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.hygienic_design.trapped_volume_count"
        ],
        "compiled_inputs": [
          "geometry_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-013",
      "pack_id": "F_OVERLAY",
      "title": "Food equipment docs should reference EHEDG hygienic design guidance when claimed",
      "description": "If hygienic design compliance is claimed or required, the documentation should reference the applied guidance (e.g., EHEDG Doc 8) and link to the design rationale/validation evidence.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "info",
      "fix_template": "Add a note in the drawing pack naming EHEDG Guideline 8 (Doc 8) as applied guidance and link to the hygienic design rationale/cleanability validation report.",
      "refs": [
        "REF-HYG-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-013",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.text_all",
          "op": "contains",
          "right": "EHEDG"
        },
        "source_evaluator_hint": "Accept either explicit 'EHEDG' reference in drawing notes or a linked hygiene specification document referenced by the drawing pack.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.text_all"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-014",
      "pack_id": "F_OVERLAY",
      "title": "Food-contact materials must have framework FCM compliance evidence and traceability controls",
      "description": "Requires evidence that food-contact materials/articles are compliant with EU 1935/2004 general safety requirements and that traceability systems exist for recall and responsibility attribution.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Obtain and attach supplier/manufacturer documentation supporting EU 1935/2004 compliance and implement lot/batch traceability in ERP/QMS; add references in the technical file.",
      "refs": [
        "REF-FCM-EU-1935-2004"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-014",
        "source_analysis_mode": "full",
        "source_standard_clause": "Article 3; Article 17",
        "source_predicate": {
          "left": "docs.fcm.framework_1935_2004.compliance_statement_present",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Check for a stored compliance statement or supplier declaration tying the part/material to EU 1935/2004; separately confirm traceability (batch/lot linkage).",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_full_text",
        "source_needs_manual_confirmation": false,
        "source_inputs": [
          "docs.fcm.framework_1935_2004.compliance_statement_present",
          "docs.fcm.traceability_system_present"
        ],
        "compiled_inputs": [
          "manual_context"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-015",
      "pack_id": "F_OVERLAY",
      "title": "Food-contact plastics must have EU 10/2011 declaration of compliance and supporting documentation",
      "description": "Requires a written declaration of compliance and supporting documentation for plastic food-contact materials/articles and relevant intermediate products when EU 10/2011 applies.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Collect the EU 10/2011 Declaration of Compliance (with Annex IV fields) and store supporting migration/testing documentation; update supplier requirements if missing.",
      "refs": [
        "REF-FCM-EU-10-2011"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-015",
        "source_analysis_mode": "full",
        "source_standard_clause": "Article 15\u201316; Annex IV",
        "source_predicate": {
          "left": "docs.fcm.eu10_2011.declaration_present",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Verify presence of DoC and that it includes Annex IV information; verify supporting test/risk documentation is stored and retrievable for authorities.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_full_text",
        "source_needs_manual_confirmation": false,
        "source_inputs": [
          "docs.fcm.eu10_2011.declaration_present",
          "docs.fcm.eu10_2011.supporting_docs_present"
        ],
        "compiled_inputs": [
          "manual_context"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-016",
      "pack_id": "F_OVERLAY",
      "title": "Stainless steel material specs must be stated per EN 10088-3 where applicable",
      "description": "Ensures stainless steel bars/rods/wire/sections used for parts are specified with an EN 10088-3-compliant grade/delivery condition in the drawing/BOM so procurement and inspection are consistent.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "material_spec"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Update the BOM/material callout to include EN 10088-3 (or appropriate EN 10088 part for the product form) and specify the required steel grade/delivery condition.",
      "refs": [
        "REF-MAT-EN10088-3"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-016",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "bom.materials.stainless_spec_text",
          "op": "contains",
          "right": "EN 10088-3"
        },
        "source_evaluator_hint": "If the project uses stainless steels in the EN 10088-3 product forms, require explicit EN 10088-3 referencing and grade identification; otherwise suppress.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "bom.materials.stainless_spec_text"
        ],
        "compiled_inputs": [
          "material_spec"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-017",
      "pack_id": "F_OVERLAY",
      "title": "General tolerance note must be present when ISO 2768-fH is used",
      "description": "Ensures the drawing explicitly states ISO 2768-fH as the default general tolerance class for unspecified dimensions, to avoid uncontrolled tolerance assumptions.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add to title block: 'General tolerances ISO 2768-fH' (and, if referencing ISO 2768-2, add ':1989' or adopt ISO 22081 explicitly).",
      "refs": [
        "REF-TOL-2768-FH"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-017",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.title_block.general_tolerance_note",
          "op": "contains",
          "right": "ISO 2768-fH"
        },
        "source_evaluator_hint": "Also recommend explicitly dating any ISO 2768-2 reference component because ISO 2768-2 is withdrawn; treat use of geometrical class (H) as legacy unless matched to a successor approach.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.title_block.general_tolerance_note"
        ],
        "compiled_inputs": [
          "drawing_title_block"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-018",
      "pack_id": "F_OVERLAY",
      "title": "Machinery Directive technical file and EC declaration must exist for CE-marked machinery",
      "description": "Requires evidence that the technical file, instructions, and EC declaration of conformity exist when Machinery Directive conformity is claimed.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "critical",
      "fix_template": "Create/collect the EC Declaration of Conformity, technical file (incl. risk assessment), and instructions; store them under revision control and reference applied standards.",
      "refs": [
        "REF-MACH-DIR-2006-42"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-018",
        "source_analysis_mode": "full",
        "source_standard_clause": "Article 5; Annex I 1.7.4",
        "source_predicate": {
          "left": "docs.ce.ec_declaration_present",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Confirm Article 5 obligations are met via document presence and version control; treat missing documents as critical evidence gaps.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_full_text",
        "source_needs_manual_confirmation": false,
        "source_inputs": [
          "docs.ce.ec_declaration_present",
          "docs.ce.technical_file_present",
          "docs.ce.instructions_present"
        ],
        "compiled_inputs": [
          "manual_context"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-019",
      "pack_id": "F_OVERLAY",
      "title": "Hygienic-zone geometry must minimize crevices and inaccessible joints",
      "description": "Checks for narrow gaps/crevices and inaccessible joints in hygienic zones as a proxy for meeting ISO 14159 hygienic design intent.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "geometry_features"
      ],
      "check_logic": {
        "type": "hybrid"
      },
      "severity": "major",
      "fix_template": "Redesign joints to eliminate crevices (e.g., continuous/sealed welds, hygienic fasteners, open access) and ensure surfaces are accessible for cleaning/inspection.",
      "refs": [
        "REF-FOOD-ISO"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-019",
        "source_analysis_mode": "geometry_dfm",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "cad.hygienic_design.crevice_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Detect gaps below a configurable threshold and inaccessible joints in tagged hygienic zones; require zone tagging if absent.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "cad.hygienic_design.crevice_count"
        ],
        "compiled_inputs": [
          "geometry_features"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-020",
      "pack_id": "F_OVERLAY",
      "title": "Hygienic machinery documentation must include cleaning/maintenance information",
      "description": "Ensures drawing pack or linked docs include the cleaning/maintenance information necessary to support hygienic use when ISO 14159 is in scope.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add cleaning/maintenance instructions reference (document ID) to the drawing pack and ensure it is controlled and accessible to users.",
      "refs": [
        "REF-FOOD-ISO"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-020",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.hygiene.cleaning_instructions_present",
          "op": "==",
          "right": true
        },
        "source_evaluator_hint": "Accept either explicit cleaning instructions in the drawing pack or a referenced cleaning procedure document ID.",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.hygiene.cleaning_instructions_present"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-021",
      "pack_id": "F_OVERLAY",
      "title": "Additive manufacturing drawings must document AM process and key quality parameters when VDI 3405 is applied",
      "description": "If a part is produced by additive manufacturing, ensure the drawing/spec includes process identification and quality parameters (as-built expectations) so inspection and acceptance are feasible.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "manual_context",
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Add 'VDI 3405' reference and link to the AM process parameter sheet (process type, layer parameters, post-processing, inspection method) in the drawing pack.",
      "refs": [
        "REF-ADD-VDI-3405"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-021",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.manufacturing.notes",
          "op": "contains",
          "right": "VDI 3405"
        },
        "source_evaluator_hint": "Apply when project.manufacturing.process == 'additive'; otherwise suppress. If VDI 3405 is the governing guideline, require reference and parameter list (at least as a linked spec).",
        "source_pilot_sets": [
          "SET_B_FOOD_PILOT"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "project.manufacturing.process",
          "drawing.manufacturing.notes"
        ],
        "compiled_inputs": [
          "manual_context",
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-022",
      "pack_id": "F_OVERLAY",
      "title": "GD&T feature control frames must be syntactically complete per ISO 1101",
      "description": "Flags incomplete or non-parsable GD&T feature control frames (missing tolerance value, missing datum references where required, malformed symbols).",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Fix malformed GD&T callouts so each frame includes the required ISO 1101 fields (symbol, tolerance value, and required datum references/modifiers).",
      "refs": [
        "REF-GPS-2"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-022",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.gdt.invalid_frame_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Implement a parser for ISO 1101-like feature control frames; treat unrecognized patterns as invalid.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.gdt.invalid_frame_count"
        ],
        "compiled_inputs": [
          "datum_scheme"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-023",
      "pack_id": "F_OVERLAY",
      "title": "Datum references used in GD&T must be defined per ISO 5459",
      "description": "Ensures every datum identifier referenced by a GD&T callout is associated with a defined datum feature and datum system.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "datum_scheme"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Define missing datum features/datum system on the drawing (datum feature symbol + leader) so every referenced datum is unambiguous.",
      "refs": [
        "REF-GPS-6"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-023",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.gdt.undefined_datum_reference_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Extract datum symbols and datum feature identifiers, then cross-check every datum letter used in feature control frames is defined somewhere on the drawing.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.gdt.undefined_datum_reference_count"
        ],
        "compiled_inputs": [
          "datum_scheme"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-024",
      "pack_id": "F_OVERLAY",
      "title": "GPS drawings should reference ISO 8015 when ISO GPS rules are intended to apply",
      "description": "A lightweight check that the drawing pack references ISO 8015 so GPS default concepts/rules are explicit.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_notes"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "info",
      "fix_template": "Add 'ISO 8015' to the drawing standards list if ISO GPS principles are intended to apply across the drawing.",
      "refs": [
        "REF-GPS-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-024",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.text_all",
          "op": "contains",
          "right": "ISO 8015"
        },
        "source_evaluator_hint": "Look for ISO 8015 in title block standards list or general notes.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.text_all"
        ],
        "compiled_inputs": [
          "drawing_notes"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-025",
      "pack_id": "F_OVERLAY",
      "title": "If general tolerances are used, the drawing must reference ISO 2768-1 and the tolerance class",
      "description": "Ensures explicit ISO 2768-1 reference and tolerance class (f/m/c/v) for general linear/angular tolerances when individual tolerances are not fully specified.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Update the general tolerance note to include ISO 2768-1 and the selected class (e.g., 'ISO 2768-1 m'). If also using geometrical general tolerances, explicitly decide how to handle ISO 2768-2 withdrawal.",
      "refs": [
        "REF-GPS-3"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-025",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.title_block.general_tolerance_note",
          "op": "contains",
          "right": "ISO 2768-1"
        },
        "source_evaluator_hint": "Check that the general tolerance note includes ISO 2768-1 and a class identifier; if only 'ISO 2768' is used, treat as ambiguous and raise evidence gap.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.title_block.general_tolerance_note"
        ],
        "compiled_inputs": [
          "drawing_title_block"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-026",
      "pack_id": "F_OVERLAY",
      "title": "If ISO 2768-2 is referenced, it must be explicitly dated or migrated because ISO 2768-2 is withdrawn",
      "description": "ISO 2768-2:1989 is withdrawn; this rule flags ambiguous or undated references to ISO 2768-2 in drawings and requires an explicit decision (freeze to :1989 or adopt a successor approach).",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "drawing_title_block"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Replace 'ISO 2768-2' with 'ISO 2768-2:1989' if legacy use is intended, or update the general GPS approach (e.g., adopt ISO 22081) and revise drawing notes accordingly.",
      "refs": [
        "REF-GPS-4"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-026",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.title_block.general_tolerance_note",
          "op": "contains",
          "right": "ISO 2768-2"
        },
        "source_evaluator_hint": "If ISO 2768-2 appears without an edition (e.g., ':1989'), raise evidence gap and recommend explicitly freezing the reference or adopting ISO 22081.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": false,
        "source_inputs": [
          "drawing.title_block.general_tolerance_note"
        ],
        "compiled_inputs": [
          "drawing_title_block"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-027",
      "pack_id": "F_OVERLAY",
      "title": "Surface texture indications must include parameter/value per ISO 1302 when used",
      "description": "Flags surface texture symbols/callouts missing the required parameter/value information, to keep surface finish requirements unambiguous.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "surface_finish_spec"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Complete each surface texture callout with the required parameter/value (e.g., Ra value) and any needed qualifiers/modifiers following ISO 1302 conventions.",
      "refs": [
        "REF-GPS-7"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-027",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.surface_texture.missing_value_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Parse ISO 1302-like surface texture symbols and ensure required fields (at least one parameter/value) exist for each callout.",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.surface_texture.missing_value_count"
        ],
        "compiled_inputs": [
          "surface_finish_spec"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    },
    {
      "rule_id": "PSTD-028",
      "pack_id": "F_OVERLAY",
      "title": "Metric thread callouts must include tolerance class/position when ISO 965-1 is applied",
      "description": "Ensures metric thread specifications include tolerance class/position (e.g., internal 6H, external 6g) so manufacturing and gaging are unambiguous.",
      "applies_to": [
        "compliance_overlay"
      ],
      "inputs_required": [
        "thread_callouts"
      ],
      "check_logic": {
        "type": "deterministic"
      },
      "severity": "major",
      "fix_template": "Update thread callouts to include tolerance class (e.g., 'M10x1-6H' internal, 'M10x1-6g' external) consistent with ISO 965-1 and the intended fit/function.",
      "refs": [
        "REF-THR-1"
      ],
      "thresholds": {
        "compiled_from": "pilot_deep_research",
        "source_rule_id": "PILOTSTD-028",
        "source_analysis_mode": "drawing_spec",
        "source_standard_clause": null,
        "source_predicate": {
          "left": "drawing.thread_callouts.metric_without_tolerance_class_count",
          "op": "==",
          "right": 0
        },
        "source_evaluator_hint": "Parse metric thread callouts (e.g., 'M10x1') and verify presence of ISO 965-style tolerance class (e.g., '6H', '6g').",
        "source_pilot_sets": [
          "SET_C_GPS_DRAWING"
        ],
        "source_evidence_quality": "official_abstract",
        "source_needs_manual_confirmation": true,
        "source_inputs": [
          "drawing.thread_callouts.metric_without_tolerance_class_count"
        ],
        "compiled_inputs": [
          "thread_callouts"
        ],
        "unknown_source_inputs": [],
        "compile_status": "executable_now"
      }
    }
  ]
}